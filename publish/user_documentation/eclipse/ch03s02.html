<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>Advanced</title><meta name="generator" content="DocBook XSL-NS Stylesheets V1.75.2"><link rel="home" href="user_documentation.html" title="K3 User Documentation"><link rel="up" href="ch03.html" title="Chapter&nbsp;3.&nbsp;Language Reference"><link rel="prev" href="ch03.html" title="Chapter&nbsp;3.&nbsp;Language Reference"><link rel="next" href="ch03s03.html" title="Replacing a method of the base class"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Advanced</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="ch03.html">Prev</a>&nbsp;</td><th width="60%" align="center">Chapter&nbsp;3.&nbsp;Language Reference</th><td width="20%" align="right">&nbsp;<a accesskey="n" href="ch03s03.html">Next</a></td></tr></table><hr></div><div class="section" title="Advanced"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="_advanced"></a>Advanced</h2></div></div></div><div class="section" title="Extending an aspect (multi inheritance)"><div class="titlepage"><div><div><h3 class="title"><a name="_extending_an_aspect_multi_inheritance"></a>Extending an aspect (multi inheritance)</h3></div></div></div><p>Even if Java allows only one inheritance via <span class="emphasis"><em>extends</em></span>.
When using EMF, it is legal to inherit from several class. The underlying framework will take care to implement a pattern using Interfaces.</p><p>Our aspects must also be able to deal  with that situation.</p><p>The <span class="strong"><strong>@Aspect</strong></span> annotation can then take a <span class="strong"><strong>with</strong></span> attribute to indicate this inheritance.</p><p>If the following ecore model and its java implementation, there is a multi-inheritance from Child class to 3 ParentX classes.</p><div class="figure"><a name="d0e685"></a><p class="title"><b>Figure&nbsp;3.2.&nbsp;Metamodel used as base for the multi inheritance example</b></p><div class="figure-contents"><div class="mediaobject"><img src="./images/multi-inheritance-base-diagram.png" alt="multi inheritance base diagram"></div></div></div><br class="figure-break"><p>then, in order to correctly reflect these inheritances in the aspects, we will define the following.</p><pre class="programlisting">// [..]

import static extension multiparents.Parent1.*
import static extension multiparents.Parent2.*
import static extension multiparents.Parent3.*
import static extension multiparents.Child.*

@Aspect(className=Parent1) <a name="CO7-1"></a><img src="images/callouts/1.png" alt="1" border="0">
class Parent1Aspect {
   def void someParent1Method(){
      // [..]
   }
}
@Aspect(className=Parent2)
class Parent2Aspect {
   def void someParent2Method(){
      // [..]
   }
}
@Aspect(className=Parent3)
class Parent3Aspect {
   def void someParent3Method(){
      // [..]
   }
}

@Aspect(className=Child, with=#[ParentAspect2, ParentAspect3] ) <a name="CO7-2"></a><img src="images/callouts/2.png" alt="2" border="0">
class PostAspect extends Parent1Aspect{ <a name="CO7-3"></a><img src="images/callouts/3.png" alt="3" border="0">
   def void someMethod(){
      _self.someParent1Method()
      _self.someParent2Method()
      _self.someParent3Method()
   }
}</pre><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#CO7-1"><img src="images/callouts/1.png" alt="1" border="0"></a> </p></td><td valign="top" align="left"><p>each parent defines its own aspects.</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO7-2"><img src="images/callouts/2.png" alt="2" border="0"></a> </p></td><td valign="top" align="left"><p>secondary aspect inheritances are added thanks to the <span class="strong"><strong>with</strong></span> attribute.</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO7-3"><img src="images/callouts/3.png" alt="3" border="0"></a> </p></td><td valign="top" align="left"><p>primary aspect inheritance is declared using the <span class="strong"><strong>extends</strong></span> keyword like a single inheritance.</p></td></tr></table></div><div class="figure"><a name="d0e720"></a><p class="title"><b>Figure&nbsp;3.3.&nbsp;Multi inheritance example with aspects</b></p><div class="figure-contents"><div class="mediaobject"><img src="./images/multi-inheritance-base_and_aspects-diagram.png" alt="multi inheritance base and aspects diagram"></div></div></div><br class="figure-break"><div class="tip" title="Tip" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Tip</h3><p>The syntax <code class="literal">with=#[ParentAspect2, ParentAspect3]</code>  indicates that we create a list with 2 additional parents (in addition to the primary one that has been defined using the <span class="strong"><strong>extends</strong></span> keyword). If there is only one additional parent, then the following syntax will also work : <code class="literal">with=ParentAspect2</code></p></div><div class="important" title="Important" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Important</h3><p>When an ecore model defines an inheritance structure, the best practice is to fully reflect the structure in the aspects. Othewise, the dynamic dispatch may lead to non-intuitive behaviors.</p></div></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="ch03.html">Prev</a>&nbsp;</td><td width="20%" align="center"><a accesskey="u" href="ch03.html">Up</a></td><td width="40%" align="right">&nbsp;<a accesskey="n" href="ch03s03.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">Chapter&nbsp;3.&nbsp;Language Reference&nbsp;</td><td width="20%" align="center"><a accesskey="h" href="user_documentation.html">Home</a></td><td width="40%" align="right" valign="top">&nbsp;Replacing a method of the base class</td></tr></table></div></body></html>